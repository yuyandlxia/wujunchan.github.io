<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨æˆ·ä¸­å¿ƒä¸»ä¹‰æ™ºèƒ½åˆ¶é€  | ç¥éº“åŸç§‘æŠ€æ™ºèƒ½å†³ç­–æŠ¥å‘Š</title>
    
    <!-- Placeholder Comments as per requirements -->
    <!-- Chosen Palette: Corporate Professional Neutrals -->
    <!-- Application Structure Plan: A single-page dashboard with thematic sections (Overview, Product Insights, Reviewer Management, Core Algorithms) accessible via a fixed sidebar. This structure prioritizes user-guided exploration over a linear report format. The key interaction is a simulation of the 'Market Feedback Correction' mechanism, which dynamically updates charts and tables to visually demonstrate the paper's core accountability loop, making the complex concept tangible and impactful. The design emphasizes clarity, professionalism, and data integrity, with added business KPIs and actionable insights. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Initial product scores (Table 7). Goal: Compare product performance. Viz: Bar Chart (Chart.js). Interaction: Hover for details. Justification: Clear comparison of multiple items. Added KPIs for max/avg score.
        - Report Info: AI-optimized formulas (Tables 14, 15). Goal: Inform on optimal outcomes. Viz: HTML Cards. Interaction: Static display. Justification: Presents key takeaways clearly. Added AI-driven insights.
        - Report Info: Reviewer contributions (Table 9, 21). Goal: Show impact of market feedback. Viz: Dynamic Bar Chart & Table (Chart.js, HTML). Interaction: Button click to trigger 'before' and 'after' states. Justification: Creates a powerful narrative of the accountability algorithm, which is a core innovation of the paper. Added KPIs for reviewer base and star distribution summary.
        - Report Info: Star rating distribution (Table 21). Goal: Compare group stats before/after feedback. Viz: Donut Chart (Chart.js). Interaction: Updates with main simulation. Justification: Shows aggregate changes effectively.
        - Report Info: Core algorithm concepts. Goal: Educate and build trust. Viz: Styled HTML/CSS diagrams. Interaction: Static display. Justification: Simplifies complex ideas without technical overhead.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Professional Corporate Palette */
            --bg-main: #F9F9F9; /* Light off-white background */
            --bg-card: #FFFFFF; /* Pure white cards */
            --text-primary: #2C3E50; /* Dark blue-grey for main text */
            --text-secondary: #7F8C8D; /* Medium grey for secondary text */
            --color-primary: #4A6D7C; /* Authoritative blue-grey */
            --color-primary-light: #D0DCE0; /* Softer blue-grey for highlights */
            --color-accent-positive: #27AE60; /* Professional green for positive changes */
            --color-accent-negative: #E74C3C; /* Professional red for negative changes */
            --border-color: #E0E0E0; /* Light grey for borders */
            --shadow-color: rgba(0, 0, 0, 0.08); /* Subtle shadow */
        }
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.6;
        }
        .sidebar-link {
            transition: all 0.2s ease-in-out;
            font-weight: 500;
        }
        .sidebar-link.active, .sidebar-link:hover {
            background-color: var(--color-primary-light);
            color: var(--color-primary);
            transform: translateX(4px);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* Max width for charts */
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
                max-height: 60vh;
            }
        }
        .card {
            background-color: var(--bg-card);
            border-radius: 0.5rem; /* Slightly less rounded for professionalism */
            border: 1px solid var(--border-color);
            box-shadow: 0 6px 12px -2px var(--shadow-color); /* More pronounced, professional shadow */
            padding: 2rem; /* Increased padding for more breathing room */
        }
        .kpi-value {
            color: var(--color-primary);
        }
        .change-positive {
            color: var(--color-accent-positive);
        }
        .change-negative {
            color: var(--color-accent-negative);
        }
        .flow-diagram-icon {
            font-size: 1.8rem; /* Slightly smaller, more refined icons */
            color: var(--color-primary);
        }
        .btn {
            background-color: var(--color-primary);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem; /* Slightly less rounded */
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.1s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn:hover {
            background-color: color-mix(in srgb, var(--color-primary) 90%, black 10%);
            transform: translateY(-1px);
        }
        .btn:active {
            transform: translateY(0);
            box-shadow: none;
        }
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .kpi-item {
            background-color: var(--bg-main);
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            text-align: center;
        }
        .kpi-item .value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }
        .kpi-item .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        .ai-insight-box {
            background-color: color-mix(in srgb, var(--bg-main) 80%, var(--color-primary-light) 20%);
            border-left: 4px solid var(--color-primary);
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-top: 1.5rem;
        }
        .ai-insight-box h4 {
            color: var(--color-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        .ai-insight-box p {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }
    </style>
</head>

<body class="flex">

    <!-- Sidebar Navigation -->
    <aside class="w-64 h-screen sticky top-0 bg-white border-r border-[var(--border-color)] p-6 flex-col justify-between hidden lg:flex">
        <div>
            <div class="flex items-center gap-3 mb-10">
                <div class="p-2 bg-[var(--color-primary)] rounded-md text-white font-bold text-xl">UCM</div>
                <h1 class="text-xl font-bold text-[var(--text-primary)]">ä¼ä¸šæ™ºèƒ½å†³ç­–å¹³å°</h1>
            </div>
            <nav id="sidebar-nav" class="flex flex-col gap-3">
                <a href="#overview" class="sidebar-link active flex items-center gap-3 px-4 py-2 rounded-md">
                    <span class="text-lg">ğŸ“Š</span> å¹³å°æ¦‚è§ˆ
                </a>
                <a href="#product-insights" class="sidebar-link flex items-center gap-3 px-4 py-2 rounded-md">
                    <span class="text-lg">ğŸ”¬</span> äº§å“æ´å¯Ÿ
                </a>
                <a href="#reviewer-management" class="sidebar-link flex items-center gap-3 px-4 py-2 rounded-md">
                    <span class="text-lg">ğŸ‘¥</span> è¯„å®¢ç®¡ç†
                </a>
                <a href="#algorithms" class="sidebar-link flex items-center gap-3 px-4 py-2 rounded-md">
                    <span class="text-lg">âš™ï¸</span> æ ¸å¿ƒç®—æ³•
                </a>
            </nav>
        </div>
        <div class="text-xs text-[var(--text-secondary)]">
            <p>&copy; 2025 ç”¨æˆ·ä¸­å¿ƒä¸»ä¹‰æ™ºèƒ½åˆ¶é€ </p>
            <p>ä¼ä¸šæ™ºèƒ½å†³ç­–æŠ¥å‘Š</p>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-6 sm:p-8 lg:p-12">
        <div class="max-w-7xl mx-auto space-y-16">

            <!-- Section 1: Overview -->
            <section id="overview" class="space-y-8">
                <h2 class="text-4xl font-bold text-[var(--text-primary)]">å¹³å°æ¦‚è§ˆ</h2>
                <p class="text-xl text-[var(--text-secondary)] leading-relaxed">
                    æ­¤æŠ¥å‘Šæ˜¯åŸºäºã€ŠæœåŠ¡å…±åŒå¯Œè£•çš„ç”¨æˆ·ä¸­å¿ƒä¸»ä¹‰æ™ºèƒ½åˆ¶é€ ã€‹ç ”ç©¶ä¸­çš„æ ¸å¿ƒç†å¿µä¸æ•°æ®è½¬åŒ–ä¸ºå¯äº¤äº’çš„å•†ä¸šæ´å¯Ÿã€‚æˆ‘ä»¬é€šè¿‡æ„å»ºä¸€ä¸ªâ€œç”¨æˆ·å…±åˆ›+ä»·å€¼å…±äº«â€çš„æ•°å­—ç¤¾åŒºï¼Œç³»ç»Ÿæ€§åœ°è§£å†³ä¼ä¸šåœ¨äº§å“åˆ›æ–°ä¸­é¢ä¸´çš„ä¸‰å¤§æ ¸å¿ƒæŒ‘æˆ˜ã€‚
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-[var(--color-primary)]">ğŸ¯ éœ€æ±‚ç²¾å‡†æ•æ‰</h3>
                        <p class="text-base text-[var(--text-secondary)]">é€šè¿‡å¤§è§„æ¨¡ã€ç»“æ„åŒ–çš„ç”¨æˆ·è¯„ä»·ï¼Œç²¾å‡†é‡åŒ–ç”¨æˆ·åå¥½ï¼Œæ­ç¤ºçœŸå®å¸‚åœºéœ€æ±‚ã€‚</p>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-[var(--color-primary)]">ğŸš€ ä¼˜è´¨äº§å“ç ”å‘</h3>
                        <p class="text-base text-[var(--text-secondary)]">åˆ©ç”¨AIæ¨¡å‹æ·±åº¦åˆ†æç”¨æˆ·æ•°æ®ï¼Œæ™ºèƒ½æ¨èæœ€ä½³äº§å“é…æ–¹ï¼ŒåŠ©åŠ›â€œçˆ†æ¬¾â€äº§å“æ‰“é€ ã€‚</p>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-[var(--color-primary)]">ğŸ“ˆ å¸‚åœºå…±è¯†åŠ é€Ÿ</h3>
                        <p class="text-base text-[var(--text-secondary)]">å€ŸåŠ©â€œè¯„å®¢è¿åŠ¨â€å’Œå¸‚åœºåé¦ˆé—­ç¯æœºåˆ¶ï¼ŒåŠ é€Ÿæ–°äº§å“åœ¨ç›®æ ‡åœˆå±‚çš„è®¤çŸ¥ä¸æ¨å¹¿ï¼Œå¿«é€Ÿå»ºç«‹å¸‚åœºå…±è¯†ã€‚</p>
                    </div>
                </div>
                <div class="card">
                    <h3 class="font-bold text-xl mb-6 text-center text-[var(--color-primary)]">åˆ›æ–°ç”Ÿæ€é—­ç¯ (PDCA)</h3>
                    <p class="text-center text-base text-[var(--text-secondary)] mb-8">å¹³å°çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªæŒç»­è¿­ä»£çš„é—­ç¯ç³»ç»Ÿï¼Œå°†ç”¨æˆ·è¯„ä»·ã€AIä¼˜åŒ–ä¸å¸‚åœºéªŒè¯ç´§å¯†ç»“åˆï¼Œé©±åŠ¨äº§å“ä¸æ–­è¿›åŒ–ï¼Œç¡®ä¿æŒç»­åˆ›æ–°ä¸ä»·å€¼å®ç°ã€‚</p>
                    <div class="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-12 text-center">
                        <div class="flex flex-col items-center">
                            <div class="w-16 h-16 bg-[var(--color-primary-light)] rounded-full flex items-center justify-center flow-diagram-icon mb-2">ğŸ“</div>
                            <h4 class="font-semibold text-lg text-[var(--text-primary)]">è§„åˆ’ (Plan)</h4>
                            <p class="text-sm text-[var(--text-secondary)]">å®šä¹‰äº§å“å‚æ•°ä¸ç›®æ ‡</p>
                        </div>
                        <div class="text-3xl font-light text-[var(--color-primary)] transform rotate-90 md:rotate-0">â†’</div>
                        <div class="flex flex-col items-center">
                            <div class="w-16 h-16 bg-[var(--color-primary-light)] rounded-full flex items-center justify-center flow-diagram-icon mb-2">â–¶ï¸</div>
                            <h4 class="font-semibold text-lg text-[var(--text-primary)]">æ‰§è¡Œ (Do)</h4>
                            <p class="text-sm text-[var(--text-secondary)]">æ”¶é›†ç”¨æˆ·è¯„ä»·æ•°æ®</p>
                        </div>
                         <div class="text-3xl font-light text-[var(--color-primary)] transform rotate-90 md:rotate-0">â†’</div>
                        <div class="flex flex-col items-center">
                            <div class="w-16 h-16 bg-[var(--color-primary-light)] rounded-full flex items-center justify-center flow-diagram-icon mb-2">ğŸ“Š</div>
                            <h4 class="font-semibold text-lg text-[var(--text-primary)]">æ£€æŸ¥ (Check)</h4>
                            <p class="text-sm text-[var(--text-secondary)]">AIåˆ†æä¸æ¨¡å‹ä¼˜åŒ–</p>
                        </div>
                         <div class="text-3xl font-light text-[var(--color-primary)] transform rotate-90 md:rotate-0">â†’</div>
                        <div class="flex flex-col items-center">
                            <div class="w-16 h-16 bg-[var(--color-primary-light)] rounded-full flex items-center justify-center flow-diagram-icon mb-2">ğŸ”„</div>
                            <h4 class="font-semibold text-lg text-[var(--text-primary)]">è¡ŒåŠ¨ (Act)</h4>
                            <p class="text-sm text-[var(--text-secondary)]">å¸‚åœºéªŒè¯ä¸ç­–ç•¥ä¿®æ­£</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 2: Product Insights -->
            <section id="product-insights" class="space-y-8">
                <h2 class="text-4xl font-bold text-[var(--text-primary)]">äº§å“æ´å¯Ÿ</h2>
                 <p class="text-xl text-[var(--text-secondary)] leading-relaxed">
                    æœ¬èŠ‚æ·±å…¥åˆ†æäº†é£å‘³å°é…’çš„æ€§èƒ½è¡¨ç°ã€‚é€šè¿‡CPDFWAç®—æ³•å¯¹åŸå§‹ç”¨æˆ·è¯„ä»·è¿›è¡Œæ ¡å‡†ï¼Œæˆ‘ä»¬å¾—å‡ºäº†å„æ¬¾äº§å“çš„ç»¼åˆå¾—åˆ†ï¼Œå¹¶åˆ©ç”¨AIæ¨¡å‹é¢„æµ‹å‡ºç†è®ºä¸Šçš„æœ€ä½³é…æ–¹ï¼Œä¸ºäº§å“ç ”å‘æä¾›ç²¾å‡†çš„æ•°æ®æŒ‡å¯¼ã€‚
                </p>

                <div class="kpi-grid">
                    <div class="kpi-item">
                        <div class="value" id="product-highest-score">--</div>
                        <div class="label">æœ€é«˜äº§å“å¾—åˆ†</div>
                    </div>
                    <div class="kpi-item">
                        <div class="value" id="product-average-score">--</div>
                        <div class="label">å¹³å‡äº§å“å¾—åˆ†</div>
                    </div>
                    <div class="kpi-item">
                        <div class="value" id="product-evaluated-count">--</div>
                        <div class="label">å·²è¯„ä¼°äº§å“æ•°é‡</div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="font-bold text-xl mb-4 text-[var(--color-primary)]">é£å‘³å°é…’ç»¼åˆå¾—åˆ†æ¦‚è§ˆ</h3>
                    <p class="text-base text-[var(--text-secondary)] mb-6">åŸºäºCPDFWAç®—æ³•æ ¡å‡†åçš„25æ¬¾åˆå§‹é£å‘³å°é…’ç»¼åˆå¾—åˆ†ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨æ¡å½¢ä¸Šå¯æŸ¥çœ‹å…·ä½“åˆ†æ•°ã€‚å¾—åˆ†è¶Šé«˜ï¼Œç”¨æˆ·ä½“éªŒè¯„ä»·è¶Šå¥½ã€‚</p>
                    <div class="chart-container">
                        <canvas id="productScoresChart"></canvas>
                    </div>
                    <div class="ai-insight-box">
                        <h4>AIæ´å¯Ÿä¸ä¸šåŠ¡å»ºè®®ï¼š</h4>
                        <p>
                            å½“å‰äº§å“å¾—åˆ†åˆ†å¸ƒæ˜¾ç¤ºï¼Œéƒ¨åˆ†äº§å“å·²è·å¾—è¾ƒé«˜ç”¨æˆ·è®¤å¯ã€‚AIæ¨¡å‹å·²è¯†åˆ«å‡ºæ½œåœ¨çš„â€œçˆ†æ¬¾â€é…æ–¹ã€‚å»ºè®®ä¼ä¸šä¼˜å…ˆå¯¹é«˜å¾—åˆ†äº§å“è¿›è¡Œå¸‚åœºéªŒè¯ï¼Œå¹¶ç»“åˆAIæ¨èçš„é…æ–¹ï¼ŒåŠ é€Ÿæ–°äº§å“çš„ç ”å‘ä¸è¿­ä»£ã€‚
                        </p>
                    </div>
                </div>
                <div class="card">
                    <h3 class="font-bold text-xl mb-4 text-[var(--color-primary)]">AIé©±åŠ¨çš„æœ€ä½³é…æ–¹å†³ç­–</h3>
                    <p class="text-base text-[var(--text-secondary)] mb-6">é€šè¿‡BPç¥ç»ç½‘ç»œä¸é—ä¼ ç®—æ³•ï¼ˆBP-GAï¼‰ä»¥åŠæ”¯æŒå‘é‡å›å½’ï¼ˆSVRï¼‰æ¨¡å‹ï¼Œå¹³å°èƒ½å¤Ÿé¢„æµ‹å¹¶æ¨èç†è®ºä¸Šçš„æœ€ä¼˜äº§å“é…æ–¹ï¼Œæ˜¾è‘—æå‡ç ”å‘æ•ˆç‡ã€‚</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="p-8 bg-[var(--bg-main)] rounded-lg border border-[var(--border-color)] shadow-sm">
                            <h4 class="font-semibold text-lg text-[var(--text-primary)] mb-2">BP-GA ä¼˜åŒ–é…æ–¹</h4>
                            <p class="text-sm text-[var(--text-secondary)] mb-4">åŸºäºBPç¥ç»ç½‘ç»œä¸é—ä¼ ç®—æ³•çš„ä¼˜åŒ–ç»“æœã€‚</p>
                            <p class="text-5xl font-bold kpi-value mb-4">117 <span class="text-xl font-medium">åˆ†</span></p>
                            <ul class="text-base space-y-2 text-[var(--text-secondary)] list-disc list-inside">
                                <li>ç‰æ—å°é…’: 11.9%</li>
                                <li>æ°´æº¶C100: 74.6%</li>
                                <li>è‹æ‰“æ°´: 13.5%</li>
                            </ul>
                            <div class="ai-insight-box mt-4">
                                <p>
                                    æ­¤é…æ–¹åœ¨BP-GAæ¨¡å‹ä¸­è¡¨ç°æœ€ä½³ï¼Œé¢„æµ‹ç”¨æˆ·ä½“éªŒå¾—åˆ†æœ€é«˜ã€‚å…¶æˆåˆ†é…æ¯”å…·æœ‰é«˜åº¦å¸‚åœºæ½œåŠ›ã€‚
                                </p>
                            </div>
                        </div>
                        <div class="p-8 bg-[var(--bg-main)] rounded-lg border border-[var(--border-color)] shadow-sm">
                            <h4 class="font-semibold text-lg text-[var(--text-primary)] mb-2">SVR ä¼˜åŒ–é…æ–¹</h4>
                            <p class="text-sm text-[var(--text-secondary)] mb-4">åŸºäºæ”¯æŒå‘é‡å›å½’ä¸é«˜å¯†åº¦ç½‘æ ¼æœç´¢çš„ä¼˜åŒ–ç»“æœã€‚</p>
                            <p class="text-5xl font-bold kpi-value mb-4">111 <span class="text-xl font-medium">åˆ†</span></p>
                            <ul class="text-base space-y-2 text-[var(--text-secondary)] list-disc list-inside">
                                <li>ç‰æ—å°é…’: 10.0%</li>
                                <li>æ°´æº¶C100: 79.5%</li>
                                <li>è‹æ‰“æ°´: 10.5%</li>
                            </ul>
                            <div class="ai-insight-box mt-4">
                                <p>
                                    SVRæ¨¡å‹æä¾›çš„é…æ–¹åŒæ ·ä¼˜ç§€ï¼Œä¸BP-GAç»“æœç›¸äº’éªŒè¯äº†ä¼˜åŒ–æ–¹å‘çš„å¯é æ€§ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="ai-insight-box mt-6">
                        <h4>ç»¼åˆä¸šåŠ¡å»ºè®®ï¼š</h4>
                        <p>
                            ä¸¤ç§ä¼˜åŒ–æ¨¡å‹å‡ç»™å‡ºäº†é«˜åˆ†é…æ–¹ï¼Œå…¶ä¸­BP-GAæ¨¡å‹é¢„æµ‹å¾—åˆ†ç•¥é«˜ã€‚å»ºè®®ä¼ä¸šä¼˜å…ˆè€ƒè™‘BP-GAæ¨èçš„é…æ–¹è¿›è¡Œä¸‹ä¸€è½®å¸‚åœºéªŒè¯ï¼Œå¹¶æŒç»­ç›‘æ§ç”¨æˆ·åé¦ˆã€‚å¹³å°èƒ½å¤Ÿé€šè¿‡ç²¾å‡†é…æ–¹æ¨èï¼Œæ˜¾è‘—ç¼©çŸ­äº§å“ç ”å‘å‘¨æœŸï¼Œé™ä½è¯•é”™æˆæœ¬ï¼ŒåŠ©åŠ›ä¼ä¸šå¿«é€Ÿæ¨å‡ºå¸‚åœºçˆ†æ¬¾ã€‚
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Reviewer Management -->
            <section id="reviewer-management" class="space-y-8">
                <h2 class="text-4xl font-bold text-[var(--text-primary)]">è¯„å®¢ç®¡ç†ä¸è´¡çŒ®ä¿®æ­£</h2>
                <p class="text-xl text-[var(--text-secondary)] leading-relaxed">
                    è¯„å®¢æ˜¯å¹³å°ä»·å€¼å…±åˆ›çš„æ ¸å¿ƒã€‚æœ¬èŠ‚å±•ç¤ºäº†å¦‚ä½•é‡åŒ–è¯„å®¢çš„è´¡çŒ®ï¼Œå¹¶å¼•å…¥äº†ç‹¬ç‰¹çš„â€œæ ·æœ¬è¿½è´£â€æœºåˆ¶ã€‚å½“æ–°äº§å“è·å¾—å¸‚åœºæˆåŠŸåï¼Œç³»ç»Ÿä¼šæ ¹æ®è¯„å®¢çš„åˆå§‹è¯„ä»·å‡†ç¡®æ€§ï¼ŒåŠ¨æ€ä¿®æ­£å…¶è´¡çŒ®é‡ä¸æ˜Ÿçº§ï¼Œå®ç°å…¬å¹³æ¿€åŠ±ä¸æŒç»­ä¼˜åŒ–ã€‚
                </p>

                <div class="kpi-grid">
                    <div class="kpi-item">
                        <div class="value" id="reviewer-total-count">--</div>
                        <div class="label">å¹³å°è¯„å®¢æ€»æ•°</div>
                    </div>
                    <div class="kpi-item">
                        <div class="value" id="reviewer-avg-contribution">--</div>
                        <div class="label">å¹³å‡è¯„å®¢è´¡çŒ®é‡</div>
                    </div>
                    <div class="kpi-item">
                        <div class="value" id="reviewer-5-star-count">--</div>
                        <div class="label">5æ˜Ÿè¯„å®¢æ•°é‡ (ä¿®æ­£å)</div>
                    </div>
                </div>

                <div class="card">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                        <div>
                            <h3 class="font-bold text-xl text-[var(--color-primary)]">è¯„å®¢è´¡çŒ®é‡ä¿®æ­£æ¨¡æ‹Ÿ</h3>
                            <p class="text-base text-[var(--text-secondary)]">æ¨¡æ‹Ÿå¸‚åœºéªŒè¯æˆåŠŸåï¼Œè¯„å®¢è´¡çŒ®é‡çš„åŠ¨æ€å˜åŒ–ï¼Œç›´è§‚å±•ç¤ºâ€œæ ·æœ¬è¿½è´£â€æœºåˆ¶ã€‚æ­¤æœºåˆ¶ç¡®ä¿äº†è¯„å®¢è¯„ä»·çš„çœŸå®æ€§å’Œä¸“ä¸šæ€§ã€‚</p>
                        </div>
                        <button id="simulate-btn" class="btn">ğŸ”„ æ¨¡æ‹Ÿå¸‚åœºåé¦ˆä¿®æ­£</button>
                    </div>
                    <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
                        <div class="xl:col-span-2">
                            <div class="chart-container h-[500px] max-h-[60vh]">
                                <canvas id="reviewerContributionsChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-semibold text-lg text-center mb-4 text-[var(--color-primary)]">æ˜Ÿçº§åˆ†å¸ƒå˜åŒ–</h4>
                            <div class="chart-container h-[230px] max-h-[25vh]">
                                <canvas id="starDistributionChart"></canvas>
                            </div>
                            <div class="mt-8 overflow-x-auto">
                                <h4 class="font-semibold text-lg text-center mb-4 text-[var(--color-primary)]">ä»£è¡¨æ€§è¯„å®¢å˜åŒ–</h4>
                                <table class="w-full text-base text-left border-collapse">
                                    <thead class="text-sm text-[var(--text-secondary)] uppercase bg-[var(--bg-main)]">
                                        <tr>
                                            <th class="px-4 py-3 border-b border-[var(--border-color)]">è¯„å®¢</th>
                                            <th class="px-4 py-3 border-b border-[var(--border-color)]">è´¡çŒ®é‡ (%)</th>
                                            <th class="px-4 py-3 border-b border-[var(--border-color)]">æ˜Ÿçº§</th>
                                        </tr>
                                    </thead>
                                    <tbody id="reviewer-table-body">
                                        <!-- JS will populate this -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="ai-insight-box mt-6">
                        <h4>ä¸šåŠ¡ä»·å€¼ä¸è¯„å®¢ç”Ÿæ€ï¼š</h4>
                        <p>
                            â€œæ ·æœ¬è¿½è´£â€æœºåˆ¶æœ‰æ•ˆæ¿€åŠ±äº†è¯„å®¢æä¾›æ›´å‡†ç¡®ã€æ›´è´Ÿè´£ä»»çš„è¯„ä»·ã€‚é€šè¿‡åŠ¨æ€è°ƒæ•´è´¡çŒ®é‡å’Œæ˜Ÿçº§ï¼Œå¹³å°èƒ½å¤Ÿç­›é€‰å‡ºçœŸæ­£æœ‰ä»·å€¼çš„ä¸“ä¸šè¯„å®¢ï¼Œä¸ºä¼ä¸šæä¾›é«˜è´¨é‡ã€å¯ä¿¡èµ–çš„ä¼—åŒ…æ•°æ®ï¼Œé™ä½å†³ç­–é£é™©ï¼Œå¹¶æ„å»ºä¸€ä¸ªå¥åº·ã€é«˜æ•ˆçš„è¯„å®¢ç”Ÿæ€ç³»ç»Ÿã€‚
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 4: Core Algorithms -->
            <section id="algorithms" class="space-y-8">
                <h2 class="text-4xl font-bold text-[var(--text-primary)]">æ ¸å¿ƒç®—æ³•è§£æ</h2>
                <p class="text-xl text-[var(--text-secondary)] leading-relaxed">
                    å¹³å°çš„æ™ºèƒ½å†³ç­–èƒ½åŠ›ç”±ä¸€ç³»åˆ—åˆ›æ–°ç®—æ³•é©±åŠ¨ã€‚è¿™äº›ç®—æ³•ååŒå·¥ä½œï¼Œå°†åˆ†æ•£ã€ä¸»è§‚çš„ç”¨æˆ·è¯„ä»·è½¬åŒ–ä¸ºå¯é ã€å¯æ“ä½œçš„å•†ä¸šæ´å¯Ÿï¼Œæ˜¯å®ç°ç”¨æˆ·ä¸­å¿ƒä¸»ä¹‰æ™ºèƒ½åˆ¶é€ çš„æ ¸å¿ƒã€‚
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-[var(--color-primary)]">CPDFWA ç®—æ³•</h3>
                        <p class="text-base text-[var(--text-secondary)]">ç”¨æˆ·ä¸šåŠ¡ç†Ÿæ‚‰åº¦æ¦‚ç‡å¯†åº¦å‡½æ•°åŠ æƒå¹³å‡ç®—æ³•ã€‚å®ƒé€šè¿‡åŠ æƒèåˆç¾¤ä½“è¯„ä»·ï¼Œæ™ºèƒ½æ ¡å‡†ä¸»è§‚æ‰“åˆ†ï¼Œæœ‰æ•ˆè¿‡æ»¤å™ªå£°æ•°æ®ï¼Œå¾—å‡ºæ›´å¯é çš„äº§å“ç»¼åˆåˆ†ã€‚</p>
                        <div class="ai-insight-box mt-4 p-3">
                            <p class="text-sm">
                                <strong>ä¸šåŠ¡ä»·å€¼ï¼š</strong> ç¡®ä¿ç”¨æˆ·è¯„ä»·çš„å®¢è§‚æ€§ä¸å¯é æ€§ï¼Œä¸ºäº§å“å†³ç­–æä¾›åšå®æ•°æ®åŸºç¡€ã€‚
                            </p>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-[var(--color-primary)]">è¯„å®¢è´¡çŒ®é‡ç®—æ³•</h3>
                        <p class="text-base text-[var(--text-secondary)]">é‡åŒ–æ¯ä½è¯„å®¢åœ¨è¯„ä»·è¿‡ç¨‹ä¸­çš„è´¡çŒ®ã€‚å®ƒè§£å†³äº†ä»·å€¼å…±ç”Ÿåœºæ™¯ä¸‹å·¥ä½œé‡è¯æ˜çš„éš¾é¢˜ï¼Œä¸ºå®ç°å…¬å¹³çš„â€œè¯„ä»·è–ªé…¬â€æ¿€åŠ±æä¾›äº†åŸºç¡€ã€‚</p>
                        <div class="ai-insight-box mt-4 p-3">
                            <p class="text-sm">
                                <strong>ä¸šåŠ¡ä»·å€¼ï¼š</strong> æ¿€åŠ±é«˜è´¨é‡è¯„å®¢å‚ä¸ï¼Œæ„å»ºæ´»è·ƒä¸”ä¸“ä¸šçš„è¯„å®¢ç¤¾åŒºã€‚
                            </p>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="font-bold text-xl mb-3 text-[var(--color-primary)]">å¸‚åœºåé¦ˆä¿®æ­£ç®—æ³•</h3>
                        <p class="text-base text-[var(--text-secondary)]">å¹³å°æœ€å…·åˆ›æ–°æ€§çš„æœºåˆ¶ã€‚å®ƒå°†äº§å“çš„æœ€ç»ˆå¸‚åœºè¡¨ç°ä¸è¯„å®¢çš„åˆå§‹è¯„ä»·æŒ‚é’©ï¼Œå¯¹è´¡çŒ®é‡å’Œæ˜Ÿçº§è¿›è¡ŒäºŒæ¬¡ä¿®æ­£ï¼Œå½¢æˆâ€œæ ·æœ¬è¿½è´£â€é—­ç¯ã€‚</p>
                        <div class="ai-insight-box mt-4 p-3">
                            <p class="text-sm">
                                <strong>ä¸šåŠ¡ä»·å€¼ï¼š</strong> æŒç»­ä¼˜åŒ–è¯„å®¢è´¨é‡ï¼Œç¡®ä¿å¹³å°æ•°æ®ä¸å¸‚åœºå®é™…è¡¨ç°é«˜åº¦ä¸€è‡´ï¼Œé™ä½ä¼ä¸šå†³ç­–é£é™©ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- Data Storage ---
    const AppData = {
        productScores: [
            { id: 'A', score: 79 }, { id: 'B', score: 75 }, { id: 'C', score: 72 },
            { id: 'D', score: 68 }, { id: 'E', score: 59 }, { id: 'F', score: 92 },
            { id: 'G', score: 51 }, { id: 'H', score: 51 }, { id: 'I', score: 49 },
            { id: 'J', score: 43 }, { id: 'K', score: 56 }, { id: 'L', score: 66 },
            { id: 'M', score: 54 }, { id: 'N', score: 73 }, { id: 'O', score: 53 },
            { id: 'P', score: 56 }, { id: 'Q', score: 61 }, { id: 'R', score: 78 },
            { id: 'S', score: 67 }, { id: 'T', score: 56 }, { id: 'U', score: 72 },
            { id: 'V', score: 64 }, { id: 'W', score: 61 }, { id: 'X', score: 62 },
            { id: 'Y', score: 57 }
        ],
        reviewerContributions: [
            { name: 'åˆ˜å©µç²', original_contribution: 83.33, adjusted_contribution: 78.63, original_star: 4, adjusted_star: 3 },
            { name: 'å®‹ æ±Ÿ', original_contribution: 64.04, adjusted_contribution: 81.41, original_star: 2, adjusted_star: 4 },
            { name: 'é‚±æµ·å³°', original_contribution: 44.74, adjusted_contribution: 93.44, original_star: 0, adjusted_star: 4 },
            { name: 'ç‹ä¸½å¨Ÿ', original_contribution: 49.12, adjusted_contribution: 79.53, original_star: 1, adjusted_star: 3 },
            { name: 'ä¸å®è‹', original_contribution: 49.12, adjusted_contribution: 86.31, original_star: 1, adjusted_star: 4 },
            { name: 'èµµå®—è¹', original_contribution: 28.07, adjusted_contribution: 84.00, original_star: 0, adjusted_star: 4 },
            { name: 'æ¸¸é“¶å·', original_contribution: 80.70, adjusted_contribution: 88.56, original_star: 4, adjusted_star: 4 },
            { name: 'å®‹æ–°ä¼Ÿ', original_contribution: 35.09, adjusted_contribution: 82.71, original_star: 0, adjusted_star: 4 },
            { name: 'è´ºä¿Šæ°', original_contribution: 48.25, adjusted_contribution: 95.43, original_star: 1, adjusted_star: 5 },
            { name: 'å»–æ­£æº', original_contribution: 34.21, adjusted_contribution: 87.48, original_star: 0, adjusted_star: 4 },
            { name: 'å‘è¿æ˜¥', original_contribution: 52.63, adjusted_contribution: 92.32, original_star: 2, adjusted_star: 4 },
            { name: 'è‘£ç‰å¹³', original_contribution: 27.19, adjusted_contribution: 74.11, original_star: 0, adjusted_star: 3 },
            { name: 'æ æ¨', original_contribution: 57.02, adjusted_contribution: 90.52, original_star: 2, adjusted_star: 4 },
            { name: 'ç‹ç¥šç¥º', original_contribution: 35.96, adjusted_contribution: 83.19, original_star: 0, adjusted_star: 4 },
            { name: 'æ å¤', original_contribution: 52.63, adjusted_contribution: 88.18, original_star: 2, adjusted_star: 4 },
            { name: 'èƒ¡æ™¨ç¡•', original_contribution: 66.67, adjusted_contribution: 100.00, original_star: 3, adjusted_star: 5 },
            { name: 'å½­æ²™æ²™', original_contribution: 50.88, adjusted_contribution: 82.06, original_star: 1, adjusted_star: 4 },
            { name: 'è°­ æ', original_contribution: 49.12, adjusted_contribution: 85.77, original_star: 1, adjusted_star: 4 },
            { name: 'ä½• å‹‡', original_contribution: 62.28, adjusted_contribution: 97.60, original_star: 2, adjusted_star: 5 },
            { name: 'æ›¾ å·§', original_contribution: 87.72, adjusted_contribution: 99.21, original_star: 4, adjusted_star: 5 },
            { name: 'è’‹çº¢ç›Š', original_contribution: 37.72, adjusted_contribution: 89.47, original_star: 0, adjusted_star: 4 },
            { name: 'å‘¨ æ ', original_contribution: 55.26, adjusted_contribution: 82.66, original_star: 2, adjusted_star: 4 },
            { name: 'é‚¹ è²', original_contribution: 100.00, adjusted_contribution: 28.33, original_star: 5, adjusted_star: 0 },
            { name: 'å‘¨ç»¿å¹³', original_contribution: 100.00, adjusted_contribution: 28.33, original_star: 5, adjusted_star: 0 },
            { name: 'ç½—æ´‹é›ªç»®', original_contribution: 76.32, adjusted_contribution: 21.62, original_star: 3, adjusted_star: 0 },
            { name: 'ç¨‹ è¯š', original_contribution: 83.33, adjusted_contribution: 23.61, original_star: 4, adjusted_star: 0 },
        ].sort((a, b) => b.original_contribution - a.original_contribution),
        representativeReviewers: ['åˆ˜å©µç²', 'é‚¹ è²', 'é‚±æµ·å³°', 'è´ºä¿Šæ°', 'æ›¾ å·§', 'ç½—æ´‹é›ªç»®']
    };

    // --- Chart instances ---
    let productScoresChart, reviewerContributionsChart, starDistributionChart;
    let isAdjusted = false;

    // --- Chart.js Global Config ---
    Chart.defaults.font.family = "'Inter', 'Noto Sans SC', sans-serif";
    Chart.defaults.color = getComputedStyle(document.documentElement).getPropertyValue('--text-secondary').trim(); // Use CSS variable for chart text color

    // --- KPI Update Functions ---
    function updateProductKPIs() {
        const scores = AppData.productScores.map(p => p.score);
        const highestScore = Math.max(...scores);
        const averageScore = (scores.reduce((sum, s) => sum + s, 0) / scores.length).toFixed(2);
        const evaluatedCount = scores.length;

        document.getElementById('product-highest-score').textContent = highestScore;
        document.getElementById('product-average-score').textContent = averageScore;
        document.getElementById('product-evaluated-count').textContent = evaluatedCount;
    }

    function updateReviewerKPIs(adjusted = false) {
        const totalReviewers = AppData.reviewerContributions.length;
        const contributionKey = adjusted ? 'adjusted_contribution' : 'original_contribution';
        const starKey = adjusted ? 'adjusted_star' : 'original_star';

        const avgContribution = (AppData.reviewerContributions.reduce((sum, r) => sum + r[contributionKey], 0) / totalReviewers).toFixed(2);
        const fiveStarCount = AppData.reviewerContributions.filter(r => r[starKey] === 5).length;

        document.getElementById('reviewer-total-count').textContent = totalReviewers;
        document.getElementById('reviewer-avg-contribution').textContent = `${avgContribution}%`;
        document.getElementById('reviewer-5-star-count').textContent = fiveStarCount;
    }

    // --- Chart Creation Functions ---
    function createProductScoresChart() {
        const ctx = document.getElementById('productScoresChart').getContext('2d');
        const sortedData = [...AppData.productScores].sort((a, b) => b.score - a.score);
        productScoresChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: sortedData.map(p => `äº§å“ ${p.id}`),
                datasets: [{
                    label: 'ç»¼åˆå¾—åˆ†',
                    data: sortedData.map(p => p.score),
                    backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--color-primary').trim(),
                    borderColor: getComputedStyle(document.documentElement).getPropertyValue('--color-primary').trim(),
                    borderWidth: 1,
                    borderRadius: 4,
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: (context) => `å¾—åˆ†: ${context.parsed.y}`
                        }
                    },
                    title: {
                        display: true,
                        text: 'å„æ¬¾é£å‘³å°é…’ç»¼åˆå¾—åˆ†',
                        color: Chart.defaults.color,
                        font: { size: 16, weight: 'bold' }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'å¾—åˆ†', color: Chart.defaults.color }
                    },
                    x: {
                        title: { display: true, text: 'äº§å“ç¼–å·', color: Chart.defaults.color }
                    }
                }
            }
        });
    }

    function createReviewerContributionsChart(adjusted = false) {
        const ctx = document.getElementById('reviewerContributionsChart').getContext('2d');
        const dataKey = adjusted ? 'adjusted_contribution' : 'original_contribution';
        const sortedData = [...AppData.reviewerContributions].sort((a, b) => b[dataKey] - a[dataKey]);

        const chartData = {
            labels: sortedData.map(r => r.name),
            datasets: [{
                label: adjusted ? 'ä¿®æ­£åè´¡çŒ®é‡ (%)' : 'åŸå§‹è´¡çŒ®é‡ (%)',
                data: sortedData.map(r => r[dataKey]),
                backgroundColor: adjusted ? getComputedStyle(document.documentElement).getPropertyValue('--color-accent-positive').trim() : getComputedStyle(document.documentElement).getPropertyValue('--color-primary').trim(),
                borderRadius: 4,
            }]
        };

        if (reviewerContributionsChart) {
            reviewerContributionsChart.data = chartData;
            reviewerContributionsChart.options.plugins.title.text = adjusted ? 'è¯„å®¢è´¡çŒ®é‡ (å¸‚åœºåé¦ˆä¿®æ­£å)' : 'è¯„å®¢è´¡çŒ®é‡ (åŸå§‹)';
            reviewerContributionsChart.data.datasets[0].label = adjusted ? 'ä¿®æ­£åè´¡çŒ®é‡ (%)' : 'åŸå§‹è´¡çŒ®é‡ (%)';
            reviewerContributionsChart.data.datasets[0].backgroundColor = adjusted ? getComputedStyle(document.documentElement).getPropertyValue('--color-accent-positive').trim() : getComputedStyle(document.documentElement).getPropertyValue('--color-primary').trim();
            reviewerContributionsChart.update();
        } else {
            reviewerContributionsChart = new Chart(ctx, {
                type: 'bar',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'è¯„å®¢è´¡çŒ®é‡ (åŸå§‹)', padding: { bottom: 20 }, color: Chart.defaults.color, font: { size: 16, weight: 'bold' } },
                        tooltip: {
                            callbacks: {
                                label: (context) => `è´¡çŒ®é‡: ${context.parsed.x.toFixed(2)}%`
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'è´¡çŒ®é‡ (%)', color: Chart.defaults.color }
                        },
                        y: {
                            ticks: { font: { size: 10 }, color: Chart.defaults.color }
                        }
                    }
                }
            });
        }
    }

    function createStarDistributionChart(adjusted = false) {
        const ctx = document.getElementById('starDistributionChart').getContext('2d');
        const starKey = adjusted ? 'adjusted_star' : 'original_star';
        const starCounts = [0, 0, 0, 0, 0, 0]; // 0 to 5 stars
        AppData.reviewerContributions.forEach(r => {
            starCounts[r[starKey]]++;
        });

        const chartData = {
            labels: ['0æ˜Ÿ', '1æ˜Ÿ', '2æ˜Ÿ', '3æ˜Ÿ', '4æ˜Ÿ', '5æ˜Ÿ'],
            datasets: [{
                label: 'è¯„å®¢æ•°é‡',
                data: starCounts,
                backgroundColor: [
                    '#BDC3C7', /* Grey for 0 star */
                    '#95A5A6', /* Darker Grey for 1 star */
                    '#7F8C8D', /* Even Darker Grey for 2 star */
                    getComputedStyle(document.documentElement).getPropertyValue('--color-primary').trim(), /* Primary for 3 star */
                    getComputedStyle(document.documentElement).getPropertyValue('--color-accent-positive').trim(), /* Positive for 4 star */
                    '#F39C12' /* Gold/Orange for 5 star */
                ],
                borderColor: getComputedStyle(document.documentElement).getPropertyValue('--bg-card').trim(),
                borderWidth: 2,
            }]
        };

        if (starDistributionChart) {
            starDistributionChart.data = chartData;
            starDistributionChart.options.plugins.title.text = adjusted ? 'æ˜Ÿçº§åˆ†å¸ƒ (ä¿®æ­£å)' : 'æ˜Ÿçº§åˆ†å¸ƒ (åŸå§‹)';
            starDistributionChart.update();
        } else {
            starDistributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'right',
                            labels: {
                                color: Chart.defaults.color
                            }
                        },
                        title: { display: true, text: 'æ˜Ÿçº§åˆ†å¸ƒ (åŸå§‹)', color: Chart.defaults.color, font: { size: 16, weight: 'bold' } }
                    }
                }
            });
        }
    }

    // --- UI Update Functions ---
    function updateReviewerTable(adjusted = false) {
        const tableBody = document.getElementById('reviewer-table-body');
        tableBody.innerHTML = '';
        const contributionKey = adjusted ? 'adjusted_contribution' : 'original_contribution';
        const starKey = adjusted ? 'adjusted_star' : 'original_star';

        // Sort by contribution for better readability in the table
        const sortedReviewers = [...AppData.reviewerContributions].sort((a, b) => b[contributionKey] - a[contributionKey]);

        // Only show a subset of top reviewers for brevity in the table, but ensure representative ones are included
        const displayReviewers = sortedReviewers.filter(r => AppData.representativeReviewers.includes(r.name) || r[contributionKey] > 80 || r[contributionKey] < 30).slice(0, 10); // Show top 10 or representative

        displayReviewers.forEach(reviewer => {
            const isIncreased = reviewer.adjusted_contribution > reviewer.original_contribution;
            const changeClass = adjusted ? (isIncreased ? 'change-positive' : 'change-negative') : '';
            const changeIcon = adjusted ? (isIncreased ? 'â–²' : 'â–¼') : '';
            
            const row = `
                <tr>
                    <td class="px-4 py-2 border-b border-[var(--border-color)]">${reviewer.name}</td>
                    <td class="px-4 py-2 border-b border-[var(--border-color)] font-semibold ${changeClass}">
                        ${reviewer[contributionKey].toFixed(2)}% ${changeIcon}
                    </td>
                    <td class="px-4 py-2 border-b border-[var(--border-color)] text-lg ${changeClass}">${'â­'.repeat(reviewer[starKey]) || 'â–'}</td>
                </tr>
            `;
            tableBody.innerHTML += row;
        });
    }

    // --- Event Listeners ---
    document.getElementById('simulate-btn').addEventListener('click', () => {
        isAdjusted = !isAdjusted;
        createReviewerContributionsChart(isAdjusted);
        createStarDistributionChart(isAdjusted);
        updateReviewerTable(isAdjusted);
        updateReviewerKPIs(isAdjusted); // Update KPIs after simulation
        const btn = document.getElementById('simulate-btn');
        btn.innerHTML = isAdjusted ? 'ğŸ”„ æ¢å¤åŸå§‹çŠ¶æ€' : 'ğŸ”„ æ¨¡æ‹Ÿå¸‚åœºåé¦ˆä¿®æ­£';
    });
    
    // Sidebar Navigation Logic
    const navLinks = document.querySelectorAll('#sidebar-nav a');
    const sections = document.querySelectorAll('main section');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === entry.target.id) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, { rootMargin: "-30% 0px -70% 0px" }); // Adjusted rootMargin for better section highlighting

    sections.forEach(section => observer.observe(section));

    // --- Initialization ---
    function init() {
        createProductScoresChart();
        createReviewerContributionsChart(false);
        createStarDistributionChart(false);
        updateReviewerTable(false);
        updateProductKPIs(); // Initial KPI update for products
        updateReviewerKPIs(false); // Initial KPI update for reviewers
    }

    init();
});
</script>

</body>
</html>
